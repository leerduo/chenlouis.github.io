
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  
    <title>Displaying Bitmaps in Your UI | louis.chen</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=3, minimum-scale=1">
    
    <meta name="author" content="louis.chen">
    
    <meta name="description" content="This lesson brings together everything from previous lessons, showing you how to load multiple bitmaps into[ViewPager](file:///D:/Users/Administrator/">
    
    
    
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/pacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/pacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>

  <body>
    <header>
      <div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.svg" alt="louis.chen" title="louis.chen"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="louis.chen">louis.chen</a></h1>
				<h2 class="blog-motto">Mobile developers,experience extreme product.</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					
						<li><a href="/">博客</a></li>
					
						<li><a href="/archives">归档</a></li>
					
					<li>
					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="text" id="search" name="q" autocomplete="off" maxlength="20" placeholder="搜索" />
						<input type="hidden" name="q" value="site:yoursite.com">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>

    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/02/02/displaying-bitmaps-in-your-ui/" title="Displaying Bitmaps in Your UI" itemprop="url">Displaying Bitmaps in Your UI</a>
  </h1>
  <p class="article-author">By
    
      <a href="http://yoursite.com" title="louis.chen">louis.chen</a>
    </p>
  <p class="article-time">
    <time datetime="2015-02-02T06:23:52.000Z" itemprop="datePublished">2015-02-02</time>
    更新日期:<time datetime="2015-04-20T07:21:35.635Z" itemprop="dateModified">2015-04-20</time>
    
  </p>
</header>
	<div class="article-content">
		
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">文章目录</strong>
		<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Load_Bitmaps_into_a_ViewPager_Implementation"><span class="toc-number">1.</span> <span class="toc-text">Load Bitmaps into a ViewPager Implementation</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#实现加载图片到ViewPager(Load_Bitmaps_into_a_ViewPager_Implementation)"><span class="toc-number">2.</span> <span class="toc-text">实现加载图片到ViewPager(Load Bitmaps into a ViewPager Implementation)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Load_Bitmaps_into_a_GridView_Implementation"><span class="toc-number">3.</span> <span class="toc-text">Load Bitmaps into a GridView Implementation</span></a></li></ol>
		</div>
		
		<p>This lesson brings together everything from previous lessons, showing you how to load multiple bitmaps into<code>[ViewPager](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/support/v4/view/ViewPager.html)</code> and <code>[GridView](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/widget/GridView.html)</code> components using a background thread and bitmap cache, while dealing with concurrency and configuration changes.</p>
<h2 id="Load_Bitmaps_into_a_ViewPager_Implementation">Load Bitmaps into a ViewPager Implementation</h2><hr>
<p>The <a href="file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/design/patterns/swipe-views.html" target="_blank" rel="external">swipe view pattern</a> is an excellent way to navigate the detail view of an image gallery. You can implement this pattern using a <code>[ViewPager](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/support/v4/view/ViewPager.html)</code> component backed by a<code>[PagerAdapter](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/support/v4/view/PagerAdapter.html)</code>. However, a more suitable backing adapter is the subclass <code>[FragmentStatePagerAdapter](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/support/v4/app/FragmentStatePagerAdapter.html)</code> which automatically destroys and saves state of the <code>[Fragments](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/app/Fragment.html)</code>in the <code>[ViewPager](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/support/v4/view/ViewPager.html)</code> as they disappear off-screen, keeping memory usage down.</p>
<p><strong>Note:</strong> If you have a smaller number of images and are confident they all fit within the application memory limit, then using a regular <code>[PagerAdapter](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/support/v4/view/PagerAdapter.html)</code> or<code>[FragmentPagerAdapter](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/support/v4/app/FragmentPagerAdapter.html)</code> might be more appropriate.</p>
<p>Here’s an implementation of a <code>[ViewPager](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/support/v4/view/ViewPager.html)</code> with <code>[ImageView](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/widget/ImageView.html)</code> children. The main activity holds the<code>[ViewPager](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/support/v4/view/ViewPager.html)</code> and the adapter:</p>
<p>译：</p>
<p>这一课会演示如何运用前面几节课的内容，使用后台线程与Cache机制来加载图片到 ViewPager 与 GridView 组件，并且学习处理并发与配置改变问题。</p>
<h2 id="实现加载图片到ViewPager(Load_Bitmaps_into_a_ViewPager_Implementation)">实现加载图片到ViewPager(Load Bitmaps into a ViewPager Implementation)</h2><p><a href="http://developer.android.com/design/patterns/swipe-views.html" target="_blank" rel="external">swipe view pattern</a>是一个用来切换显示不同详情界面的很好的方法。(关于这种效果请先参看<a href="http://developer.android.com/design/patterns/swipe-views.html" target="_blank" rel="external">Android Design: Swipe Views</a>).</p>
<p>你可以通过 <a href="http://developer.android.com/reference/android/support/v4/view/PagerAdapter.html" target="_blank" rel="external">PagerAdapter</a> 与 <a href="http://developer.android.com/reference/android/support/v4/view/ViewPager.html" target="_blank" rel="external">ViewPager</a> 组件来实现这个效果。 然而，一个更加合适的Adapter是PagerAdapter 的子类 <a href="http://developer.android.com/reference/android/support/v4/app/FragmentStatePagerAdapter.html" target="_blank" rel="external">FragmentStatePagerAdapter</a>:它可以在某个ViewPager中的子视图切换出屏幕时自动销毁与保存 Fragments 的状态。这样能够保持消耗更少的内存。</p>
<blockquote>
<p><strong>Note:</strong> 如果你只有为数不多的图片并且确保不会超出程序内存限制，那么使用 PagerAdapter 或 FragmentPagerAdapter 会更加合适。<br>下面是一个使用ViewPager与ImageView作为子视图的示例。主Activity包含有ViewPager 和adapter。</p>
</blockquote>
<p>[java]public class ImageDetailActivity extends FragmentActivity {<br>public static final String EXTRA_IMAGE = &quot;extra_image&quot;;</p>
<p>private ImagePagerAdapter mAdapter;<br>private ViewPager mPager;</p>
<p>// A static dataset to back the ViewPager adapter<br>public final static Integer[] imageResIds = new Integer[] {<br>R.drawable.sample_image_1, R.drawable.sample_image_2, R.drawable.sample_image_3,<br>R.drawable.sample_image_4, R.drawable.sample_image_5, R.drawable.sample_image_6,<br>R.drawable.sample_image_7, R.drawable.sample_image_8, R.drawable.sample_image_9};</p>
<p>@Override<br>public void onCreate(Bundle savedInstanceState) {<br>super.onCreate(savedInstanceState);<br>setContentView(R.layout.image_detail_pager); // Contains just a ViewPager</p>
<p>mAdapter = new ImagePagerAdapter(getSupportFragmentManager(), imageResIds.length);<br>mPager = (ViewPager) findViewById(R.id.pager);<br>mPager.setAdapter(mAdapter);<br>}</p>
<p>public static class ImagePagerAdapter extends FragmentStatePagerAdapter {<br>private final int mSize;</p>
<p>public ImagePagerAdapter(FragmentManager fm, int size) {<br>super(fm);<br>mSize = size;<br>}</p>
<p>@Override<br>public int getCount() {<br>return mSize;<br>}</p>
<p>@Override<br>public Fragment getItem(int position) {<br>return ImageDetailFragment.newInstance(position);<br>}<br>}<br>}[/java]<br>Here is an implementation of the details <code>[Fragment](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/app/Fragment.html)</code> which holds the <code>[ImageView](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/widget/ImageView.html)</code> children. This might seem like a perfectly reasonable approach, but can you see the drawbacks of this implementation? How could it be improved?<br>[java]public class ImageDetailFragment extends Fragment {<br>private static final String IMAGE_DATA_EXTRA = &quot;resId&quot;;<br>private int mImageNum;<br>private ImageView mImageView;</p>
<p>static ImageDetailFragment newInstance(int imageNum) {<br>final ImageDetailFragment f = new ImageDetailFragment();<br>final Bundle args = new Bundle();<br>args.putInt(IMAGE_DATA_EXTRA, imageNum);<br>f.setArguments(args);<br>return f;<br>}</p>
<p>// Empty constructor, required as per Fragment docs<br>public ImageDetailFragment() {}</p>
<p>@Override<br>public void onCreate(Bundle savedInstanceState) {<br>super.onCreate(savedInstanceState);<br>mImageNum = getArguments() != null ? getArguments().getInt(IMAGE_DATA_EXTRA) : -1;<br>}</p>
<p>@Override<br>public View onCreateView(LayoutInflater inflater, ViewGroup container,<br>Bundle savedInstanceState) {<br>// image_detail_fragment.xml contains just an ImageView<br>final View v = inflater.inflate(R.layout.image_detail_fragment, container, false);<br>mImageView = (ImageView) v.findViewById(R.id.imageView);<br>return v;<br>}</p>
<p>@Override<br>public void onActivityCreated(Bundle savedInstanceState) {<br>super.onActivityCreated(savedInstanceState);<br>final int resId = ImageDetailActivity.imageResIds[mImageNum];<br>&lt;strong&gt;mImageView.setImageResource(resId);&lt;/strong&gt; // Load image into ImageView<br>}<br>}[/java]<br>Hopefully you noticed the issue: the images are being read from resources on the UI thread, which can lead to an application hanging and being force closed. Using an <code>[AsyncTask](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/os/AsyncTask.html)</code> as described in the<a href="file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/training/displaying-bitmaps/process-bitmap.html" target="_blank" rel="external">Processing Bitmaps Off the UI Thread</a> lesson, it’s straightforward to move image loading and processing to a background thread:<br>[java]public class ImageDetailActivity extends FragmentActivity {<br>…</p>
<p>public void loadBitmap(int resId, ImageView imageView) {<br>mImageView.setImageResource(R.drawable.image_placeholder);<br>BitmapWorkerTask task = new BitmapWorkerTask(mImageView);<br>task.execute(resId);<br>}</p>
<p>… // include &lt;a href=&quot;file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/training/displaying-bitmaps/process-bitmap.html#BitmapWorkerTask&quot;&gt;&lt;code&gt;BitmapWorkerTask&lt;/code&gt;&lt;/a&gt; class<br>}</p>
<p>public class ImageDetailFragment extends Fragment {<br>…</p>
<p>@Override<br>public void onActivityCreated(Bundle savedInstanceState) {<br>super.onActivityCreated(savedInstanceState);<br>if (ImageDetailActivity.class.isInstance(getActivity())) {<br>final int resId = ImageDetailActivity.imageResIds[mImageNum];<br>// Call out to ImageDetailActivity to load the bitmap in a background thread<br>((ImageDetailActivity) getActivity()).loadBitmap(resId, mImageView);<br>}<br>}<br>}[/java]<br>Any additional processing (such as resizing or fetching images from the network) can take place in the <a href="file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/training/displaying-bitmaps/process-bitmap.html#BitmapWorkerTask" target="_blank" rel="external"><code>BitmapWorkerTask</code></a> without affecting responsiveness of the main UI. If the background thread is doing more than just loading an image directly from disk, it can also be beneficial to add a memory and/or disk cache as described in the lesson <a href="file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/training/displaying-bitmaps/cache-bitmap.html#memory-cache" target="_blank" rel="external">Caching Bitmaps</a>. Here’s the additional modifications for a memory cache:<br>[java]public class ImageDetailActivity extends FragmentActivity {<br>…<br>private LruCache&lt;String, Bitmap&gt; mMemoryCache;</p>
<p>@Override<br>public void onCreate(Bundle savedInstanceState) {<br>…<br>// initialize LruCache as per &lt;a href=&quot;file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/training/displaying-bitmaps/cache-bitmap.html#memory-cache&quot;&gt;Use a Memory Cache&lt;/a&gt; section<br>}</p>
<p>public void loadBitmap(int resId, ImageView imageView) {<br>final String imageKey = String.valueOf(resId);</p>
<p>final Bitmap bitmap = mMemoryCache.get(imageKey);<br>if (bitmap != null) {<br>mImageView.setImageBitmap(bitmap);<br>} else {<br>mImageView.setImageResource(R.drawable.image_placeholder);<br>BitmapWorkerTask task = new BitmapWorkerTask(mImageView);<br>task.execute(resId);<br>}<br>}</p>
<p>… // include updated BitmapWorkerTask from &lt;a href=&quot;file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/training/displaying-bitmaps/cache-bitmap.html#memory-cache&quot;&gt;Use a Memory Cache&lt;/a&gt; section<br>}[/java]</p>
<h2 id="Load_Bitmaps_into_a_GridView_Implementation">Load Bitmaps into a GridView Implementation</h2><hr>
<p>The <a href="file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/design/building-blocks/grid-lists.html" target="_blank" rel="external">grid list building block</a> is useful for showing image data sets and can be implemented using a<code>[GridView](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/widget/GridView.html)</code> component in which many images can be on-screen at any one time and many more need to be ready to appear if the user scrolls up or down. When implementing this type of control, you must ensure the UI remains fluid, memory usage remains under control and concurrency is handled correctly (due to the way <code>[GridView](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/widget/GridView.html)</code> recycles its children views).</p>
<p>To start with, here is a standard <code>[GridView](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/widget/GridView.html)</code> implementation with <code>[ImageView](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/widget/ImageView.html)</code> children placed inside a<code>[Fragment](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/app/Fragment.html)</code>. Again, this might seem like a perfectly reasonable approach, but what would make it better?</p>
<p>译：</p>
<p><a href="http://developer.android.com/design/building-blocks/grid-lists.html" target="_blank" rel="external">Grid list building block</a> 是一种有效显示大量图片的方式。这样能够一次显示许多图片，而且那些即将被显示的图片也处于准备显示状态。如果你想要实现这种效果，你必须确保UI是流畅的，能够控制内存使用，并且正确的处理并发问题（因为 GridView 会循环使用子视图)。</p>
<p>下面是一个在Fragment里面内置了ImageView作为GridView子视图的示例：</p>
<p>Once again, the problem with this implementation is that the image is being set in the UI thread. While this may work for small, simple images (due to system resource loading and caching), if any additional processing needs to be done, your UI grinds to a halt.</p>
<p>The same asynchronous processing and caching methods from the previous section can be implemented here. However, you also need to wary of concurrency issues as the <code>[GridView](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/widget/GridView.html)</code> recycles its children views. To handle this, use the techniques discussed in the <a href="file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/training/displaying-bitmaps/process-bitmap.html#concurrency" target="_blank" rel="external">Processing Bitmaps Off the UI Thread</a>lesson. Here is the updated solution:</p>
<p>译：</p>
<p>又一次，这一个实现的问题是图片是在UI线程中被设置。当处理小的图片时可以，但其他需要额外操作的处理，都会使你的UI慢下来。</p>
<p>与前面加载到图片到ViewPager一样，如果setImageResource的操作会比较耗时，有可能会卡到UI Thread。可以使用类似前面异步处理图片与增加缓存的方法来解决那个问题。然而，我们还需要考虑GridView的循环机制所带来的并发问题。为了处理这个问题，请参考前面的课程 。下面是一个更新的解决方案：</p>
<p>[java]public class ImageGridFragment extends Fragment implements AdapterView.OnItemClickListener {<br>…</p>
<p>private class ImageAdapter extends BaseAdapter {<br>…</p>
<p>@Override<br>public View getView(int position, View convertView, ViewGroup container) {<br>…<br>&lt;strong&gt;loadBitmap(imageResIds[position], imageView)&lt;/strong&gt;<br>return imageView;<br>}<br>}</p>
<p>public void loadBitmap(int resId, ImageView imageView) {<br>if (cancelPotentialWork(resId, imageView)) {<br>final BitmapWorkerTask task = new BitmapWorkerTask(imageView);<br>final AsyncDrawable asyncDrawable =<br>new AsyncDrawable(getResources(), mPlaceHolderBitmap, task);<br>imageView.setImageDrawable(asyncDrawable);<br>task.execute(resId);<br>}<br>}</p>
<p>static class AsyncDrawable extends BitmapDrawable {<br>private final WeakReference&lt;BitmapWorkerTask&gt; bitmapWorkerTaskReference;</p>
<p>public AsyncDrawable(Resources res, Bitmap bitmap,<br>BitmapWorkerTask bitmapWorkerTask) {<br>super(res, bitmap);<br>bitmapWorkerTaskReference =<br>new WeakReference&lt;BitmapWorkerTask&gt;(bitmapWorkerTask);<br>}</p>
<p>public BitmapWorkerTask getBitmapWorkerTask() {<br>return bitmapWorkerTaskReference.get();<br>}<br>}</p>
<p>public static boolean cancelPotentialWork(int data, ImageView imageView) {<br>final BitmapWorkerTask bitmapWorkerTask = getBitmapWorkerTask(imageView);</p>
<p>if (bitmapWorkerTask != null) {<br>final int bitmapData = bitmapWorkerTask.data;<br>if (bitmapData != data) {<br>// Cancel previous task<br>bitmapWorkerTask.cancel(true);<br>} else {<br>// The same work is already in progress<br>return false;<br>}<br>}<br>// No task associated with the ImageView, or an existing task was cancelled<br>return true;<br>}</p>
<p>private static BitmapWorkerTask getBitmapWorkerTask(ImageView imageView) {<br>if (imageView != null) {<br>final Drawable drawable = imageView.getDrawable();<br>if (drawable instanceof AsyncDrawable) {<br>final AsyncDrawable asyncDrawable = (AsyncDrawable) drawable;<br>return asyncDrawable.getBitmapWorkerTask();<br>}<br>}<br>return null;<br>}</p>
<p>… // include updated &lt;a href=&quot;file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/training/displaying-bitmaps/process-bitmap.html#BitmapWorkerTaskUpdated&quot;&gt;&lt;code&gt;BitmapWorkerTask&lt;/code&gt;&lt;/a&gt; class[/java]</p>
<p><strong>Note:</strong> The same code can easily be adapted to work with <code>[ListView](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/widget/ListView.html)</code> as well.</p>
<p>This implementation allows for flexibility in how the images are processed and loaded without impeding the smoothness of the UI. In the background task you can load images from the network or resize large digital camera photos and the images appear as the tasks finish processing.</p>
<p>For a full example of this and other concepts discussed in this lesson, please see the included sample application.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
  
	</div>
		<footer class="article-footer clearfix">


<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Android开发/">Android开发</a>
</div>



<div class="article-share" id="share">

  <div data-url="http://yoursite.com/2015/02/02/displaying-bitmaps-in-your-ui/" data-title="Displaying Bitmaps in Your UI | louis.chen" data-tsina="null" class="share clearfix">
  </div>

</div>
</footer>   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2015/02/02/displaying-bitmap-e5-b0-8f-e7-bb-93/" title="Displaying Bitmap小结">
  <strong>PREVIOUS:</strong><br/>
  <span>
  Displaying Bitmap小结</span>
</a>
</div>


<div class="next">
<a href="/2015/02/02/managing-bitmap-memory/"  title="Managing Bitmap Memory">
 <strong>NEXT:</strong><br/> 
 <span>Managing Bitmap Memory
</span>
</a>
</div>

</nav>

	
<section class="comment">
	<div class="ds-thread"></div>
</section>

</div>  
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">文章目录</strong>
  <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Load_Bitmaps_into_a_ViewPager_Implementation"><span class="toc-number">1.</span> <span class="toc-text">Load Bitmaps into a ViewPager Implementation</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#实现加载图片到ViewPager(Load_Bitmaps_into_a_ViewPager_Implementation)"><span class="toc-number">2.</span> <span class="toc-text">实现加载图片到ViewPager(Load Bitmaps into a ViewPager Implementation)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Load_Bitmaps_into_a_GridView_Implementation"><span class="toc-number">3.</span> <span class="toc-text">Load Bitmaps into a GridView Implementation</span></a></li></ol>
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
			<li><a href="/categories/Android开发/" title="Android开发">Android开发<sup>21</sup></a></li>
		
			<li><a href="/categories/Android开源框架/" title="Android开源框架">Android开源框架<sup>4</sup></a></li>
		
			<li><a href="/categories/Android开发/Dandelion/" title="Dandelion">Dandelion<sup>1</sup></a></li>
		
			<li><a href="/categories/Java/" title="Java">Java<sup>1</sup></a></li>
		
			<li><a href="/categories/Android开发/Training文档/" title="Training文档">Training文档<sup>9</sup></a></li>
		
			<li><a href="/categories/Training文档/" title="Training文档">Training文档<sup>9</sup></a></li>
		
			<li><a href="/categories/blog/" title="blog">blog<sup>1</sup></a></li>
		
			<li><a href="/categories/未分类/" title="未分类">未分类<sup>0</sup></a></li>
		
			<li><a href="/categories/自定义控件/" title="自定义控件">自定义控件<sup>4</sup></a></li>
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			<li><a href="/tags/博客/" title="博客">博客<sup>1</sup></a></li>
		
			<li><a href="/tags/文章/" title="文章">文章<sup>1</sup></a></li>
		
		</ul>
</div>


  <div class="rsspart">
	<a href="null" target="_blank" title="rss">RSS 订阅</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> louis.chen,student of USTC,Focus on mobile develop. <br/>
			It is my amibition to develop beautiful app.</p>
	</section>
	 
	<div class="social-font clearfix">
		
		<a href="http://weibo.com/2338582935" target="_blank" title="weibo"></a>
		
		
		
		<a href="https://github.com/leerduo" target="_blank" title="github"></a>
		
		
		
	</div>
		<p class="copyright">Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/A-limon/pacman" target="_blank" title="Pacman">Pacman</a> © 2015 
		
		<a href="http://yoursite.com" target="_blank" title="louis.chen">louis.chen</a>
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.1.0.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else
    {
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      h  = $('article h2')
      ah = $('article h2'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  if(ah.length==0){
    t.css('display','none');
  }else{
    c.click(function(){
      ta.css('display', 'block').addClass('fadeIn');
    });
    o.click(function(){
      ta.css('display', 'none');
    });
    $(window).scroll(function(){
      ta.css("top",Math.max(140,320-$(this).scrollTop()));
    });
  };
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina');
  var html = [
  '<a href="#" class="overlay" id="qrcode"></a>',
  '<div class="qrcode clearfix"><span>扫描二维码分享到微信朋友圈</span><a class="qrclose" href="#share"></a><strong>Loading...Please wait</strong><img id="qrcode-pic" data-src="http://s.jiathis.com/qrcode.php?url=' + encodedUrl + '"/></div>',
  '<a href="#textlogo" class="article-back-to-top" title="Top"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="QRcode"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="Weibo"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);
  $('.article-share-qrcode').click(function(){
    var imgSrc = $('#qrcode-pic').attr('data-src');
    $('#qrcode-pic').attr('src', imgSrc);
    $('#qrcode-pic').load(function(){
        $('.qrcode strong').text(' ');
    });
  });
});     
</script>


<script type="text/javascript">
  var duoshuoQuery = {short_name:"null"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script> 





  </body>
</html>
