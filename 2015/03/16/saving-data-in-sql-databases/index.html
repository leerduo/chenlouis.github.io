
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  
    <title>Saving Data in SQL Databases | louis.chen</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=3, minimum-scale=1">
    
    <meta name="author" content="louis.chen">
    
    <meta name="description" content="Saving data to a database is ideal for repeating or structured data, such as contact information. This class assumes that you are familiar with SQL da">
    
    
    
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/pacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/pacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>

  <body>
    <header>
      <div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.svg" alt="louis.chen" title="louis.chen"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="louis.chen">louis.chen</a></h1>
				<h2 class="blog-motto">Mobile developers,experience extreme product.</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					
						<li><a href="/">博客</a></li>
					
						<li><a href="/archives">归档</a></li>
					
					<li>
					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="text" id="search" name="q" autocomplete="off" maxlength="20" placeholder="搜索" />
						<input type="hidden" name="q" value="site:yoursite.com">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>

    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/03/16/saving-data-in-sql-databases/" title="Saving Data in SQL Databases" itemprop="url">Saving Data in SQL Databases</a>
  </h1>
  <p class="article-author">By
    
      <a href="http://yoursite.com" title="louis.chen">louis.chen</a>
    </p>
  <p class="article-time">
    <time datetime="2015-03-16T02:15:10.000Z" itemprop="datePublished">2015-03-16</time>
    更新日期:<time datetime="2015-04-20T07:21:35.640Z" itemprop="dateModified">2015-04-20</time>
    
  </p>
</header>
	<div class="article-content">
		
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">文章目录</strong>
		<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Define_a_Schema_and_Contract"><span class="toc-number">1.</span> <span class="toc-text">Define a Schema and Contract</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Create_a_Database_Using_a_SQL_Helper"><span class="toc-number">2.</span> <span class="toc-text">Create a Database Using a SQL Helper</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Put_Information_into_a_Database"><span class="toc-number">3.</span> <span class="toc-text">Put Information into a Database</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Read_Information_from_a_Database"><span class="toc-number">4.</span> <span class="toc-text">Read Information from a Database</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Delete_Information_from_a_Database"><span class="toc-number">5.</span> <span class="toc-text">Delete Information from a Database</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Update_a_Database"><span class="toc-number">6.</span> <span class="toc-text">Update a Database</span></a></li></ol>
		</div>
		
		<p>Saving data to a database is ideal for repeating or structured data, such as contact information. This class assumes that you are familiar with SQL databases in general and helps you get started with SQLite databases on Android. The APIs you’ll need to use a database on Android are available in the <code>[android.database.sqlite](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/database/sqlite/package-summary.html)</code>package.</p>
<h2 id="Define_a_Schema_and_Contract">Define a Schema and Contract</h2><hr>
<p>One of the main principles of SQL databases is the schema: a formal declaration of how the database is organized. The schema is reflected in the SQL statements that you use to create your database. You may find it helpful to create a companion class, known as a _contract_class, which explicitly specifies the layout of your schema in a systematic and self-documenting way.</p>
<p>A contract class is a container for constants that define names for URIs, tables, and columns. The contract class allows you to use the same constants across all the other classes in the same package. This lets you change a column name in one place and have it propagate throughout your code.</p>
<p>A good way to organize a contract class is to put definitions that are global to your whole database in the root level of the class. Then create an inner class for each table that enumerates its columns.</p>
<p><strong>Note:</strong> By implementing the <code>[BaseColumns](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/provider/BaseColumns.html)</code> interface, your inner class can inherit a primary key field called <code>_ID</code> that some Android classes such as cursor adaptors will expect it to have. It’s not required, but this can help your database work harmoniously with the Android framework.</p>
<p>For example, this snippet defines the table name and column names for a single table:</p>
<p>[java]public final class FeedReaderContract {<br>// To prevent someone from accidentally instantiating the contract class,<br>// give it an empty constructor.<br>public FeedReaderContract() {}</p>
<p>/<em> Inner class that defines the table contents </em>/<br>public static abstract class FeedEntry implements BaseColumns {<br>public static final String TABLE_NAME = &quot;entry&quot;;<br>public static final String COLUMN_NAME_ENTRY_ID = &quot;entryid&quot;;<br>public static final String COLUMN_NAME_TITLE = &quot;title&quot;;<br>public static final String COLUMN_NAME_SUBTITLE = &quot;subtitle&quot;;<br>…<br>}<br>}[/java]</p>
<h2 id="Create_a_Database_Using_a_SQL_Helper">Create a Database Using a SQL Helper</h2><hr>
<p>Once you have defined how your database looks, you should implement methods that create and maintain the database and tables. Here are some typical statements that create and delete a table:</p>
<p>[java]private static final String TEXT_TYPE = &quot; TEXT&quot;;<br>private static final String COMMA_SEP = &quot;,&quot;;<br>private static final String SQL_CREATE_ENTRIES =<br>&quot;CREATE TABLE &quot; + FeedEntry.TABLE_NAME + &quot; (&quot; +<br>FeedEntry._ID + &quot; INTEGER PRIMARY KEY,&quot; +<br>FeedEntry.COLUMN_NAME_ENTRY_ID + TEXT_TYPE + COMMA_SEP +<br>FeedEntry.COLUMN_NAME_TITLE + TEXT_TYPE + COMMA_SEP +<br>… // Any other options for the CREATE command<br>&quot; )&quot;;</p>
<p>private static final String SQL_DELETE_ENTRIES =<br>&quot;DROP TABLE IF EXISTS &quot; + FeedEntry.TABLE_NAME;[/java]</p>
<p>Just like files that you save on the device’s <a href="file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/guide/topics/data/data-storage.html#filesInternal" target="_blank" rel="external">internal storage</a>, Android stores your database in private disk space that’s associated application. Your data is secure, because by default this area is not accessible to other applications.</p>
<p>A useful set of APIs is available in the <code>[SQLiteOpenHelper](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/database/sqlite/SQLiteOpenHelper.html)</code> class. When you use this class to obtain references to your database, the system performs the potentially long-running operations of creating and updating the database only when needed and <em>not during app startup</em>. All you need to do is call<code>[getWritableDatabase()](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/database/sqlite/SQLiteOpenHelper.html#getWritableDatabase())</code> or <code>[getReadableDatabase()](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/database/sqlite/SQLiteOpenHelper.html#getReadableDatabase())</code>.</p>
<p><strong>Note:</strong> Because they can be long-running, be sure that you call <code>[getWritableDatabase()](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/database/sqlite/SQLiteOpenHelper.html#getWritableDatabase())</code> or<code>[getReadableDatabase()](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/database/sqlite/SQLiteOpenHelper.html#getReadableDatabase())</code> in a background thread, such as with <code>[AsyncTask](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/os/AsyncTask.html)</code> or <code>[IntentService](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/app/IntentService.html)</code>.</p>
<p>To use <code>[SQLiteOpenHelper](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/database/sqlite/SQLiteOpenHelper.html)</code>, create a subclass that overrides the <code>[onCreate()](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/database/sqlite/SQLiteOpenHelper.html#onCreate(android.database.sqlite.SQLiteDatabase))</code>, <code>[onUpgrade()](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/database/sqlite/SQLiteOpenHelper.html#onUpgrade(android.database.sqlite.SQLiteDatabase, int, int))</code> and <code>[onOpen()](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/database/sqlite/SQLiteOpenHelper.html#onOpen(android.database.sqlite.SQLiteDatabase))</code>callback methods. You may also want to implement <code>[onDowngrade()](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/database/sqlite/SQLiteOpenHelper.html#onDowngrade(android.database.sqlite.SQLiteDatabase, int, int))</code>, but it’s not required.</p>
<p>For example, here’s an implementation of <code>[SQLiteOpenHelper](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/database/sqlite/SQLiteOpenHelper.html)</code> that uses some of the commands shown above:</p>
<p>[java]public class FeedReaderDbHelper extends SQLiteOpenHelper {<br>// If you change the database schema, you must increment the database version.<br>public static final int DATABASE_VERSION = 1;<br>public static final String DATABASE_NAME = &quot;FeedReader.db&quot;;</p>
<p>public FeedReaderDbHelper(Context context) {<br>super(context, DATABASE_NAME, null, DATABASE_VERSION);<br>}<br>public void onCreate(SQLiteDatabase db) {<br>db.execSQL(SQL_CREATE_ENTRIES);<br>}<br>public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {<br>// This database is only a cache for online data, so its upgrade policy is<br>// to simply to discard the data and start over<br>db.execSQL(SQL_DELETE_ENTRIES);<br>onCreate(db);<br>}<br>public void onDowngrade(SQLiteDatabase db, int oldVersion, int newVersion) {<br>onUpgrade(db, oldVersion, newVersion);<br>}<br>}[/java]</p>
<p>To access your database, instantiate your subclass of <code>[SQLiteOpenHelper](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/database/sqlite/SQLiteOpenHelper.html)</code>:</p>
<p>[java]FeedReaderDbHelper mDbHelper = new FeedReaderDbHelper(getContext());[/java]</p>
<h2 id="Put_Information_into_a_Database">Put Information into a Database</h2><hr>
<p>Insert data into the database by passing a <code>[ContentValues](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/content/ContentValues.html)</code> object to the <code>[insert()](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/database/sqlite/SQLiteDatabase.html#insert(java.lang.String, java.lang.String, android.content.ContentValues))</code> method:</p>
<p>[java]// Gets the data repository in write mode<br>SQLiteDatabase db = mDbHelper.getWritableDatabase();</p>
<p>// Create a new map of values, where column names are the keys<br>ContentValues values = new ContentValues();<br>values.put(FeedEntry.COLUMN_NAME_ENTRY_ID, id);<br>values.put(FeedEntry.COLUMN_NAME_TITLE, title);<br>values.put(FeedEntry.COLUMN_NAME_CONTENT, content);</p>
<p>// Insert the new row, returning the primary key value of the new row<br>long newRowId;<br>newRowId = db.insert(<br>FeedEntry.TABLE_NAME,<br>FeedEntry.COLUMN_NAME_NULLABLE,<br>values);[/java]</p>
<p>The first argument for <code>[insert()](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/database/sqlite/SQLiteDatabase.html#insert(java.lang.String, java.lang.String, android.content.ContentValues))</code> is simply the table name. The second argument provides the name of a column in which the framework can insert NULL in the event that the <code>[ContentValues](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/content/ContentValues.html)</code> is empty (if you instead set this to <code>&quot;null&quot;</code>, then the framework will not insert a row when there are no values).</p>
<h2 id="Read_Information_from_a_Database">Read Information from a Database</h2><hr>
<p>To read from a database, use the <code>[query()](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/database/sqlite/SQLiteDatabase.html#query(boolean, java.lang.String, java.lang.String[], java.lang.String, java.lang.String[], java.lang.String, java.lang.String, java.lang.String, java.lang.String))</code> method, passing it your selection criteria and desired columns. The method combines elements of <code>[insert()](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/database/sqlite/SQLiteDatabase.html#insert(java.lang.String, java.lang.String, android.content.ContentValues))</code> and <code>[update()](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/database/sqlite/SQLiteDatabase.html#update(java.lang.String, android.content.ContentValues, java.lang.String, java.lang.String[]))</code>, except the column list defines the data you want to fetch, rather than the data to insert. The results of the query are returned to you in a <code>[Cursor](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/database/Cursor.html)</code> object.</p>
<p>[java]SQLiteDatabase db = mDbHelper.getReadableDatabase();</p>
<p>// Define a &lt;em&gt;projection&lt;/em&gt; that specifies which columns from the database<br>// you will actually use after this query.<br>String[] projection = {<br>FeedEntry._ID,<br>FeedEntry.COLUMN_NAME_TITLE,<br>FeedEntry.COLUMN_NAME_UPDATED,<br>…<br>};</p>
<p>// How you want the results sorted in the resulting Cursor<br>String sortOrder =<br>FeedEntry.COLUMN_NAME_UPDATED + &quot; DESC&quot;;</p>
<p>Cursor c = db.query(<br>FeedEntry.TABLE_NAME,  // The table to query<br>projection,                               // The columns to return<br>selection,                                // The columns for the WHERE clause<br>selectionArgs,                            // The values for the WHERE clause<br>null,                                     // don’t group the rows<br>null,                                     // don’t filter by row groups<br>sortOrder                                 // The sort order<br>);[/java]</p>
<p>To look at a row in the cursor, use one of the <code>[Cursor](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/database/Cursor.html)</code> move methods, which you must always call before you begin reading values. Generally, you should start by calling <code>[moveToFirst()](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/database/Cursor.html#moveToFirst())</code>, which places the “read position” on the first entry in the results. For each row, you can read a column’s value by calling one of the <code>[Cursor](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/database/Cursor.html)</code> get methods, such as <code>[getString()](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/database/Cursor.html#getString(int))</code> or <code>[getLong()](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/database/Cursor.html#getLong(int))</code>. For each of the get methods, you must pass the index position of the column you desire, which you can get by calling<code>[getColumnIndex()](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/database/Cursor.html#getColumnIndex(java.lang.String))</code> or <code>[getColumnIndexOrThrow()](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/database/Cursor.html#getColumnIndexOrThrow(java.lang.String))</code>. For example:</p>
<p>[java]cursor.moveToFirst();<br>long itemId = cursor.getLong(<br>cursor.getColumnIndexOrThrow(FeedEntry._ID)<br>);[/java]</p>
<h2 id="Delete_Information_from_a_Database">Delete Information from a Database</h2><hr>
<p>To delete rows from a table, you need to provide selection criteria that identify the rows. The database API provides a mechanism for creating selection criteria that protects against SQL injection. The mechanism divides the selection specification into a selection clause and selection arguments. The clause defines the columns to look at, and also allows you to combine column tests. The arguments are values to test against that are bound into the clause. Because the result isn’t handled the same as a regular SQL statement, it is immune to SQL injection.</p>
<p>[java]// Define ‘where’ part of query.<br>String selection = FeedEntry.COLUMN_NAME_ENTRY_ID + &quot; LIKE ?&quot;;<br>// Specify arguments in placeholder order.<br>String[] selectionArgs = { String.valueOf(rowId) };<br>// Issue SQL statement.<br>db.delete(table_name, selection, selectionArgs);[/java]</p>
<h2 id="Update_a_Database">Update a Database</h2><hr>
<p>When you need to modify a subset of your database values, use the <code>[update()](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/database/sqlite/SQLiteDatabase.html#update(java.lang.String, android.content.ContentValues, java.lang.String, java.lang.String[]))</code> method.</p>
<p>Updating the table combines the content values syntax of <code>[insert()](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/database/sqlite/SQLiteDatabase.html#insert(java.lang.String, java.lang.String, android.content.ContentValues))</code> with the <code>where</code> syntax of <code>[delete()](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/database/sqlite/SQLiteDatabase.html#delete(java.lang.String, java.lang.String, java.lang.String[]))</code>.</p>
<p>[java]SQLiteDatabase db = mDbHelper.getReadableDatabase();</p>
<p>// New value for one column<br>ContentValues values = new ContentValues();<br>values.put(FeedEntry.COLUMN_NAME_TITLE, title);</p>
<p>// Which row to update, based on the ID<br>String selection = FeedEntry.COLUMN_NAME_ENTRY_ID + &quot; LIKE ?&quot;;<br>String[] selectionArgs = { String.valueOf(rowId) };</p>
<p>int count = db.update(<br>FeedReaderDbHelper.FeedEntry.TABLE_NAME,<br>values,<br>selection,<br>selectionArgs);[/java]</p>
  
	</div>
		<footer class="article-footer clearfix">


<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Android开发/">Android开发</a>►<a class="article-category-link" href="/categories/Android开发/Training文档/">Training文档</a>
</div>



<div class="article-share" id="share">

  <div data-url="http://yoursite.com/2015/03/16/saving-data-in-sql-databases/" data-title="Saving Data in SQL Databases | louis.chen" data-tsina="null" class="share clearfix">
  </div>

</div>
</footer>   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2015/03/16/android-universal-image-loader/" title="Android-Universal-Image-Loader">
  <strong>PREVIOUS:</strong><br/>
  <span>
  Android-Universal-Image-Loader</span>
</a>
</div>


<div class="next">
<a href="/2015/03/16/saving-files/"  title="Saving Files">
 <strong>NEXT:</strong><br/> 
 <span>Saving Files
</span>
</a>
</div>

</nav>

	
<section class="comment">
	<div class="ds-thread"></div>
</section>

</div>  
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">文章目录</strong>
  <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Define_a_Schema_and_Contract"><span class="toc-number">1.</span> <span class="toc-text">Define a Schema and Contract</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Create_a_Database_Using_a_SQL_Helper"><span class="toc-number">2.</span> <span class="toc-text">Create a Database Using a SQL Helper</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Put_Information_into_a_Database"><span class="toc-number">3.</span> <span class="toc-text">Put Information into a Database</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Read_Information_from_a_Database"><span class="toc-number">4.</span> <span class="toc-text">Read Information from a Database</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Delete_Information_from_a_Database"><span class="toc-number">5.</span> <span class="toc-text">Delete Information from a Database</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Update_a_Database"><span class="toc-number">6.</span> <span class="toc-text">Update a Database</span></a></li></ol>
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
			<li><a href="/categories/Android开发/" title="Android开发">Android开发<sup>21</sup></a></li>
		
			<li><a href="/categories/Android开源框架/" title="Android开源框架">Android开源框架<sup>4</sup></a></li>
		
			<li><a href="/categories/Android开发/Dandelion/" title="Dandelion">Dandelion<sup>1</sup></a></li>
		
			<li><a href="/categories/Java/" title="Java">Java<sup>1</sup></a></li>
		
			<li><a href="/categories/Android开发/Training文档/" title="Training文档">Training文档<sup>9</sup></a></li>
		
			<li><a href="/categories/Training文档/" title="Training文档">Training文档<sup>9</sup></a></li>
		
			<li><a href="/categories/blog/" title="blog">blog<sup>1</sup></a></li>
		
			<li><a href="/categories/未分类/" title="未分类">未分类<sup>0</sup></a></li>
		
			<li><a href="/categories/自定义控件/" title="自定义控件">自定义控件<sup>4</sup></a></li>
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			<li><a href="/tags/博客/" title="博客">博客<sup>1</sup></a></li>
		
			<li><a href="/tags/文章/" title="文章">文章<sup>1</sup></a></li>
		
		</ul>
</div>


  <div class="rsspart">
	<a href="null" target="_blank" title="rss">RSS 订阅</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> louis.chen,student of USTC,Focus on mobile develop. <br/>
			It is my amibition to develop beautiful app.</p>
	</section>
	 
	<div class="social-font clearfix">
		
		<a href="http://weibo.com/2338582935" target="_blank" title="weibo"></a>
		
		
		
		<a href="https://github.com/leerduo" target="_blank" title="github"></a>
		
		
		
	</div>
		<p class="copyright">Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/A-limon/pacman" target="_blank" title="Pacman">Pacman</a> © 2015 
		
		<a href="http://yoursite.com" target="_blank" title="louis.chen">louis.chen</a>
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.1.0.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else
    {
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      h  = $('article h2')
      ah = $('article h2'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  if(ah.length==0){
    t.css('display','none');
  }else{
    c.click(function(){
      ta.css('display', 'block').addClass('fadeIn');
    });
    o.click(function(){
      ta.css('display', 'none');
    });
    $(window).scroll(function(){
      ta.css("top",Math.max(140,320-$(this).scrollTop()));
    });
  };
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina');
  var html = [
  '<a href="#" class="overlay" id="qrcode"></a>',
  '<div class="qrcode clearfix"><span>扫描二维码分享到微信朋友圈</span><a class="qrclose" href="#share"></a><strong>Loading...Please wait</strong><img id="qrcode-pic" data-src="http://s.jiathis.com/qrcode.php?url=' + encodedUrl + '"/></div>',
  '<a href="#textlogo" class="article-back-to-top" title="Top"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="QRcode"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="Weibo"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);
  $('.article-share-qrcode').click(function(){
    var imgSrc = $('#qrcode-pic').attr('data-src');
    $('#qrcode-pic').attr('src', imgSrc);
    $('#qrcode-pic').load(function(){
        $('.qrcode strong').text(' ');
    });
  });
});     
</script>


<script type="text/javascript">
  var duoshuoQuery = {short_name:"null"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script> 





  </body>
</html>
