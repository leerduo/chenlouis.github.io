
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  
    <title>Receiving Simple Data from Other Apps | louis.chen</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=3, minimum-scale=1">
    
    <meta name="author" content="louis.chen">
    
    <meta name="description" content="Just as your application can send data to other applications, so too can it easily receive data from applications. Think about how users interact with">
    
    
    
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/pacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/pacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>

  <body>
    <header>
      <div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.svg" alt="louis.chen" title="louis.chen"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="louis.chen">louis.chen</a></h1>
				<h2 class="blog-motto">Mobile developers,experience extreme product.</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					
						<li><a href="/">博客</a></li>
					
						<li><a href="/archives">归档</a></li>
					
					<li>
					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="text" id="search" name="q" autocomplete="off" maxlength="20" placeholder="搜索" />
						<input type="hidden" name="q" value="site:yoursite.com">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>

    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/03/18/receiving-simple-data-from-other-apps/" title="Receiving Simple Data from Other Apps" itemprop="url">Receiving Simple Data from Other Apps</a>
  </h1>
  <p class="article-author">By
    
      <a href="http://yoursite.com" title="louis.chen">louis.chen</a>
    </p>
  <p class="article-time">
    <time datetime="2015-03-18T00:35:00.000Z" itemprop="datePublished">2015-03-18</time>
    更新日期:<time datetime="2015-04-20T07:21:35.638Z" itemprop="dateModified">2015-04-20</time>
    
  </p>
</header>
	<div class="article-content">
		
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">文章目录</strong>
		<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Update_Your_Manifest"><span class="toc-number">1.</span> <span class="toc-text">Update Your Manifest</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Handle_the_Incoming_Content"><span class="toc-number">2.</span> <span class="toc-text">Handle the Incoming Content</span></a></li></ol>
		</div>
		
		<p>Just as your application can send data to other applications, so too can it easily receive data from applications. Think about how users interact with your application, and what data types you want to receive from other applications. For example, a social networking application would likely be interested in receiving text content, like an interesting web URL, from another app. The<a href="https://play.google.com/store/apps/details?id=com.google.android.apps.plus" target="_blank" rel="external">Google+ Android application</a> accepts both text <em>and</em> single or multiple images. With this app, a user can easily start a new Google+ post with photos from the Android Gallery app.</p>
<h2 id="Update_Your_Manifest">Update Your Manifest</h2><hr>
<p>Intent filters inform the system what intents an application component is willing to accept. Similar to how you constructed an intent with action <code>[ACTION_SEND](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/content/Intent.html#ACTION_SEND)</code> in the <a href="file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/training/sharing/send.html" target="_blank" rel="external">Sending Simple Data to Other Apps</a> lesson, you create intent filters in order to be able to receive intents with this action. You define an intent filter in your manifest, using the <code>[&amp;lt;intent-filter&amp;gt;](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/guide/components/intents-filters.html#ifs)</code> element. For example, if your application handles receiving text content, a single image of any type, or multiple images of any type, your manifest would look like:</p>
<p>[xml]&lt;activity android:name=&quot;.ui.MyActivity&quot; &gt;<br>&lt;intent-filter&gt;<br>&lt;action android:name=&quot;android.intent.action.SEND&quot; /&gt;<br>&lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;<br>&lt;data android:mimeType=&quot;image/<em>&quot; /&gt;<br>&lt;/intent-filter&gt;<br>&lt;intent-filter&gt;<br>&lt;action android:name=&quot;android.intent.action.SEND&quot; /&gt;<br>&lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;<br>&lt;data android:mimeType=&quot;text/plain&quot; /&gt;<br>&lt;/intent-filter&gt;<br>&lt;intent-filter&gt;<br>&lt;action android:name=&quot;android.intent.action.SEND_MULTIPLE&quot; /&gt;<br>&lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;<br>&lt;data android:mimeType=&quot;image/</em>&quot; /&gt;<br>&lt;/intent-filter&gt;<br>&lt;/activity&gt;[/xml]</p>
<p><strong>Note:</strong> For more information on intent filters and intent resolution please read <a href="file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/guide/components/intents-filters.html#ifs" target="_blank" rel="external">Intents and Intent Filters</a></p>
<p>When another application tries to share any of these things by constructing an intent and passing it to<code>[startActivity()](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/content/Context.html#startActivity(android.content.Intent))</code>, your application will be listed as an option in the intent chooser. If the user selects your application, the corresponding activity (<code>.ui.MyActivity</code> in the example above) will be started. It is then up to you to handle the content appropriately within your code and UI.</p>
<h2 id="Handle_the_Incoming_Content">Handle the Incoming Content</h2><hr>
<p>To handle the content delivered by an <code>[Intent](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/content/Intent.html)</code>, start by calling <code>[getIntent()](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/content/Intent.html#getIntent(java.lang.String))</code> to get <code>[Intent](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/content/Intent.html)</code> object. Once you have the object, you can examine its contents to determine what to do next. Keep in mind that if this activity can be started from other parts of the system, such as the launcher, then you will need to take this into consideration when examining the intent.</p>
<p>[java]void onCreate (Bundle savedInstanceState) {<br>…<br>// Get intent, action and MIME type<br>Intent intent = getIntent();<br>String action = intent.getAction();<br>String type = intent.getType();</p>
<p>if (Intent.ACTION_SEND.equals(action) &amp;&amp; type != null) {<br>if (&quot;text/plain&quot;.equals(type)) {<br>handleSendText(intent); // Handle text being sent<br>} else if (type.startsWith(&quot;image/&quot;)) {<br>handleSendImage(intent); // Handle single image being sent<br>}<br>} else if (Intent.ACTION_SEND_MULTIPLE.equals(action) &amp;&amp; type != null) {<br>if (type.startsWith(&quot;image/&quot;)) {<br>handleSendMultipleImages(intent); // Handle multiple images being sent<br>}<br>} else {<br>// Handle other intents, such as being started from the home screen<br>}<br>…<br>}</p>
<p>void handleSendText(Intent intent) {<br>String sharedText = intent.getStringExtra(Intent.EXTRA_TEXT);<br>if (sharedText != null) {<br>// Update UI to reflect text being shared<br>}<br>}</p>
<p>void handleSendImage(Intent intent) {<br>Uri imageUri = (Uri) intent.getParcelableExtra(Intent.EXTRA_STREAM);<br>if (imageUri != null) {<br>// Update UI to reflect image being shared<br>}<br>}</p>
<p>void handleSendMultipleImages(Intent intent) {<br>ArrayList&lt;Uri&gt; imageUris = intent.getParcelableArrayListExtra(Intent.EXTRA_STREAM);<br>if (imageUris != null) {<br>// Update UI to reflect multiple images being shared<br>}<br>}[/java]</p>
<p><strong>Caution:</strong> Take extra care to check the incoming data, you never know what some other application may send you. For example, the wrong MIME type might be set, or the image being sent might be extremely large. Also, remember to process binary data in a separate thread rather than the main (“UI”) thread.</p>
<p>Updating the UI can be as simple as populating an <code>[EditText](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/widget/EditText.html)</code>, or it can be more complicated like applying an interesting photo filter to an image. It’s really specific to your application what happens next.</p>
  
	</div>
		<footer class="article-footer clearfix">


<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Training文档/">Training文档</a>
</div>



<div class="article-share" id="share">

  <div data-url="http://yoursite.com/2015/03/18/receiving-simple-data-from-other-apps/" data-title="Receiving Simple Data from Other Apps | louis.chen" data-tsina="null" class="share clearfix">
  </div>

</div>
</footer>   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2015/03/18/adding-an-easy-share-action/" title="Adding an Easy Share Action">
  <strong>PREVIOUS:</strong><br/>
  <span>
  Adding an Easy Share Action</span>
</a>
</div>


<div class="next">
<a href="/2015/03/18/sending-simple-data-to-other-apps/"  title="Sending Simple Data to Other Apps">
 <strong>NEXT:</strong><br/> 
 <span>Sending Simple Data to Other Apps
</span>
</a>
</div>

</nav>

	
<section class="comment">
	<div class="ds-thread"></div>
</section>

</div>  
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">文章目录</strong>
  <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Update_Your_Manifest"><span class="toc-number">1.</span> <span class="toc-text">Update Your Manifest</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Handle_the_Incoming_Content"><span class="toc-number">2.</span> <span class="toc-text">Handle the Incoming Content</span></a></li></ol>
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
			<li><a href="/categories/Android开发/" title="Android开发">Android开发<sup>21</sup></a></li>
		
			<li><a href="/categories/Android开源框架/" title="Android开源框架">Android开源框架<sup>4</sup></a></li>
		
			<li><a href="/categories/Android开发/Dandelion/" title="Dandelion">Dandelion<sup>1</sup></a></li>
		
			<li><a href="/categories/Java/" title="Java">Java<sup>1</sup></a></li>
		
			<li><a href="/categories/Android开发/Training文档/" title="Training文档">Training文档<sup>9</sup></a></li>
		
			<li><a href="/categories/Training文档/" title="Training文档">Training文档<sup>9</sup></a></li>
		
			<li><a href="/categories/blog/" title="blog">blog<sup>1</sup></a></li>
		
			<li><a href="/categories/未分类/" title="未分类">未分类<sup>0</sup></a></li>
		
			<li><a href="/categories/自定义控件/" title="自定义控件">自定义控件<sup>4</sup></a></li>
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			<li><a href="/tags/博客/" title="博客">博客<sup>1</sup></a></li>
		
			<li><a href="/tags/文章/" title="文章">文章<sup>1</sup></a></li>
		
		</ul>
</div>


  <div class="rsspart">
	<a href="null" target="_blank" title="rss">RSS 订阅</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> louis.chen,student of USTC,Focus on mobile develop. <br/>
			It is my amibition to develop beautiful app.</p>
	</section>
	 
	<div class="social-font clearfix">
		
		<a href="http://weibo.com/2338582935" target="_blank" title="weibo"></a>
		
		
		
		<a href="https://github.com/leerduo" target="_blank" title="github"></a>
		
		
		
	</div>
		<p class="copyright">Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/A-limon/pacman" target="_blank" title="Pacman">Pacman</a> © 2015 
		
		<a href="http://yoursite.com" target="_blank" title="louis.chen">louis.chen</a>
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.1.0.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else
    {
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      h  = $('article h2')
      ah = $('article h2'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  if(ah.length==0){
    t.css('display','none');
  }else{
    c.click(function(){
      ta.css('display', 'block').addClass('fadeIn');
    });
    o.click(function(){
      ta.css('display', 'none');
    });
    $(window).scroll(function(){
      ta.css("top",Math.max(140,320-$(this).scrollTop()));
    });
  };
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina');
  var html = [
  '<a href="#" class="overlay" id="qrcode"></a>',
  '<div class="qrcode clearfix"><span>扫描二维码分享到微信朋友圈</span><a class="qrclose" href="#share"></a><strong>Loading...Please wait</strong><img id="qrcode-pic" data-src="http://s.jiathis.com/qrcode.php?url=' + encodedUrl + '"/></div>',
  '<a href="#textlogo" class="article-back-to-top" title="Top"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="QRcode"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="Weibo"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);
  $('.article-share-qrcode').click(function(){
    var imgSrc = $('#qrcode-pic').attr('data-src');
    $('#qrcode-pic').attr('src', imgSrc);
    $('#qrcode-pic').load(function(){
        $('.qrcode strong').text(' ');
    });
  });
});     
</script>


<script type="text/javascript">
  var duoshuoQuery = {short_name:"null"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script> 





  </body>
</html>
