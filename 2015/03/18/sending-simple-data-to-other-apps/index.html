
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  
    <title>Sending Simple Data to Other Apps | louis.chen</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=3, minimum-scale=1">
    
    <meta name="author" content="louis.chen">
    
    <meta name="description" content="When you construct an intent, you must specify the action you want the intent to “trigger.” Android defines several actions, including [ACTION_SEND](f">
    
    
    
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/pacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/pacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>

  <body>
    <header>
      <div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.svg" alt="louis.chen" title="louis.chen"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="louis.chen">louis.chen</a></h1>
				<h2 class="blog-motto">Mobile developers,experience extreme product.</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					
						<li><a href="/">博客</a></li>
					
						<li><a href="/archives">归档</a></li>
					
					<li>
					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="text" id="search" name="q" autocomplete="off" maxlength="20" placeholder="搜索" />
						<input type="hidden" name="q" value="site:yoursite.com">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>

    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/03/18/sending-simple-data-to-other-apps/" title="Sending Simple Data to Other Apps" itemprop="url">Sending Simple Data to Other Apps</a>
  </h1>
  <p class="article-author">By
    
      <a href="http://yoursite.com" title="louis.chen">louis.chen</a>
    </p>
  <p class="article-time">
    <time datetime="2015-03-18T00:25:52.000Z" itemprop="datePublished">2015-03-18</time>
    更新日期:<time datetime="2015-04-20T07:21:35.638Z" itemprop="dateModified">2015-04-20</time>
    
  </p>
</header>
	<div class="article-content">
		
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">文章目录</strong>
		<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Send_Text_Content"><span class="toc-number">1.</span> <span class="toc-text">Send Text Content</span></a></li></ol>
		</div>
		
		<p>When you construct an intent, you must specify the action you want the intent to “trigger.” Android defines several actions, including <code>[ACTION_SEND](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/content/Intent.html#ACTION_SEND)</code> which, as you can probably guess, indicates that the intent is sending data from one activity to another, even across process boundaries. To send data to another activity, all you need to do is specify the data and its type, the system will identify compatible receiving activities and display them to the user (if there are multiple options) or immediately start the activity (if there is only one option). Similarly, you can advertise the data types that your activities support receiving from other applications by specifying them in your manifest.</p>
<p>Sending and receiving data between applications with intents is most commonly used for social sharing of content. Intents allow users to share information quickly and easily, using their favorite applications.</p>
<p><strong>Note:</strong> The best way to add a share action item to an <code>[ActionBar](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/app/ActionBar.html)</code> is to use <code>[ShareActionProvider](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/widget/ShareActionProvider.html)</code>, which became available in API level 14. <code>[ShareActionProvider](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/widget/ShareActionProvider.html)</code> is discussed in the lesson about <a href="file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/training/sharing/shareaction.html" target="_blank" rel="external">Adding an Easy Share Action</a>.</p>
<h2 id="Send_Text_Content">Send Text Content</h2><hr>
<div><img src="file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/images/training/sharing/share-text-screenshot.png" alt="">The most straightforward and common use of the <code>[ACTION_SEND](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/content/Intent.html#ACTION_SEND)</code> action is sending text content from one activity to another. For example, the built-in Browser app can share the URL of the currently-displayed page as text with any application. This is useful for sharing an article or website with friends via email or social networking. Here is the code to implement this type of sharing:</div><br>[java]Intent sendIntent = new Intent();<br>sendIntent.setAction(Intent.ACTION_SEND);<br>sendIntent.putExtra(Intent.EXTRA_TEXT, &quot;This is my text to send.&quot;);<br>sendIntent.setType(&quot;text/plain&quot;);<br>startActivity(sendIntent);[/java]<br><br>If there’s an installed application with a filter that matches <code>[ACTION_SEND](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/content/Intent.html#ACTION_SEND)</code>and MIME type text/plain, the Android system will run it; if more than one application matches, the system displays a disambiguation dialog (a “chooser”) that allows the user to choose an app.<br><br>However, if you call <code>[Intent.createChooser()](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/content/Intent.html#createChooser(android.content.Intent, java.lang.CharSequence))</code>, passing it your <code>[Intent](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/content/Intent.html)</code> object, it returns a version of your intent that will <strong>always display the chooser</strong>. This has some advantages:<br><br><em>   Even if the user has previously selected a default action for this intent, the chooser will still be displayed.
</em>   If no applications match, Android displays a system message.<br><em>   You can specify a title for the chooser dialog.<br>Here’s the updated code:<br><br>[java]Intent sendIntent = new Intent();<br>sendIntent.setAction(Intent.ACTION_SEND);<br>sendIntent.putExtra(Intent.EXTRA_TEXT, &quot;This is my text to send.&quot;);<br>sendIntent.setType(&quot;text/plain&quot;);<br>startActivity(&lt;strong&gt;Intent.createChooser(sendIntent, getResources().getText(R.string.send_to))&lt;/strong&gt;);[/java]<br><br>The resulting dialog is shown in figure 1.<br><br>Optionally, you can set some standard extras for the intent: <code>[EXTRA_EMAIL](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/content/Intent.html#EXTRA_EMAIL)</code>, <code>[EXTRA_CC](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/content/Intent.html#EXTRA_CC)</code>, <code>[EXTRA_BCC](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/content/Intent.html#EXTRA_BCC)</code>, <code>[EXTRA_SUBJECT](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/content/Intent.html#EXTRA_SUBJECT)</code>. If the receiving application is not designed to use them, it simply ignores them.<br><br><strong>Note:</strong> Some e-mail applications, such as Gmail, expect a <code>[String[]](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/java/lang/String.html)</code> for extras like <code>[EXTRA_EMAIL](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/content/Intent.html#EXTRA_EMAIL)</code> and <code>[EXTRA_CC](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/content/Intent.html#EXTRA_CC)</code>, use<code>[putExtra(String, String[])](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/content/Intent.html#putExtra(java.lang.String, java.lang.String[]))</code> to add these to your intent.<br><br>## Send Binary Content

</em> <em> </em><br><br>Binary data is shared using the <code>[ACTION_SEND](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/content/Intent.html#ACTION_SEND)</code> action combined with setting the appropriate MIME type and placing the URI to the data in an extra named <code>[EXTRA_STREAM](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/content/Intent.html#EXTRA_STREAM)</code>. This is commonly used to share an image but can be used to share any type of binary content:<br><br>[java]Intent shareIntent = new Intent();<br>shareIntent.setAction(Intent.ACTION_SEND);<br>shareIntent.putExtra(Intent.EXTRA_STREAM, uriToImage);<br>shareIntent.setType(&quot;image/jpeg&quot;);<br>startActivity(Intent.createChooser(shareIntent, getResources().getText(R.string.send_to)));[/java]<br><br>Note the following:<br><br><em>   You can use a MIME type of `”</em>/<em>“`, but this will only match activities that are able to handle generic data streams.
</em>   The receiving application needs permission to access the data the <code>[Uri](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/net/Uri.html)</code> points to. The recommended ways to do this are:<br><br>    <em>   Store the data in your own <code>[ContentProvider](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/content/ContentProvider.html)</code>, making sure that other apps have the correct permission to access your provider. The preferred mechanism for providing access is to use <a href="file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/guide/topics/security/permissions.html#uri" target="_blank" rel="external">per-URI permissions</a> which are temporary and only grant access to the receiving application. An easy way to create a <code>[ContentProvider](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/content/ContentProvider.html)</code>like this is to use the <code>[FileProvider](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/support/v4/content/FileProvider.html)</code> helper class.
    </em>   Use the system <code>[MediaStore](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/provider/MediaStore.html)</code>. The <code>[MediaStore](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/provider/MediaStore.html)</code> is primarily aimed at video, audio and image MIME types, however beginning with Android 3.0 (API level 11) it can also store non-media types (see <code>[MediaStore.Files](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/provider/MediaStore.Files.html)</code>for more info). Files can be inserted into the <code>[MediaStore](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/provider/MediaStore.html)</code> using <code>[scanFile()](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/media/MediaScannerConnection.html#scanFile(android.content.Context, java.lang.String[], java.lang.String[], android.media.MediaScannerConnection.OnScanCompletedListener))</code> after which a <code>content://</code> style <code>[Uri](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/net/Uri.html)</code>suitable for sharing is passed to the provided <code>[onScanCompleted()](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/media/MediaScannerConnection.OnScanCompletedListener.html#onScanCompleted(java.lang.String, android.net.Uri))</code> callback. Note that once added to the system <code>[MediaStore](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/provider/MediaStore.html)</code> the content is accessible to any app on the device.<br><br>## Send Multiple Pieces of Content<br><br><em> </em> <em><br><br>To share multiple pieces of content, use the <code>[ACTION_SEND_MULTIPLE](file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/content/Intent.html#ACTION_SEND_MULTIPLE)</code> action together with a list of URIs pointing to the content. The MIME type varies according to the mix of content you’re sharing. For example, if you share 3 JPEG images, the type is still <code>&quot;image/jpeg&quot;</code>. For a mixture of image types, it should be `”image/</em>“<code>to match an activity that handles any type of image. You should only use</code>“<em>/</em>“<code>if you&#39;re sharing out a wide variety of types. As previously stated, it&#39;s up to the receiving application to parse and process your data. Here&#39;s an example:

[java]ArrayList&amp;lt;Uri&amp;gt; imageUris = new ArrayList&amp;lt;Uri&amp;gt;();
imageUris.add(imageUri1); // Add your image URIs here
imageUris.add(imageUri2);

Intent shareIntent = new Intent();
shareIntent.setAction(Intent.ACTION_SEND_MULTIPLE);
shareIntent.putParcelableArrayListExtra(Intent.EXTRA_STREAM, imageUris);
shareIntent.setType(&amp;quot;image/*&amp;quot;);
startActivity(Intent.createChooser(shareIntent, &amp;quot;Share images to..&amp;quot;));[/java]

As before, make sure the provided</code><a href="file:///D:/Users/Administrator/AppData/Local/Android/sdk/docs/reference/android/net/Uri.html" target="_blank" rel="external">URIs</a>` point to data that a receiving application can access.<br><br>一个完整的例子：<br><div><br><br>[java]package com.dystu.interactingwithotherapp;<br><br>import android.content.ContentResolver;<br>import android.content.ContentValues;<br>import android.content.Intent;<br>import android.net.Uri;<br>import android.os.Environment;<br>import android.provider.MediaStore;<br>import android.support.v7.app.ActionBarActivity;<br>import android.os.Bundle;<br>import android.view.Menu;<br>import android.view.MenuItem;<br>import android.view.View;<br><br>import java.io.File;<br>import java.util.ArrayList;<br>import java.util.Date;<br>public class MainActivity2 extends ActionBarActivity {<br><br>@Override<br> protected void onCreate(Bundle savedInstanceState) {<br> super.onCreate(savedInstanceState);<br> setContentView(R.layout.activity_main_activity2);<br> }<br> public void click(View view){<br> Intent sendIntent = new Intent();<br> sendIntent.setAction(Intent.ACTION_SEND);<br> sendIntent.putExtra(Intent.EXTRA_TEXT, &quot;This is my text to send.&quot;);<br> sendIntent.setType(&quot;text/plain&quot;);<br> startActivity(Intent.createChooser(sendIntent, &quot;选择&quot;));<br><br>}<br><br>public void click2(View view){<br><br>Intent intent = new Intent();<br> intent.setAction(Intent.ACTION_SEND);<br> intent.putExtra(Intent.EXTRA_STREAM,getUriListForImages().get(0));<br> intent.setType(&quot;image/jpeg&quot;);<br> startActivity(Intent.createChooser(intent,&quot;哈哈哈&quot;));<br><br>}<br><br>public void click3(View view){<br> ArrayList&lt;Uri&gt; imageUris = new ArrayList&lt;Uri&gt;();<br> imageUris=getUriListForImages(); // Add your image URIs here<br><br>Intent shareIntent = new Intent();<br> shareIntent.setAction(Intent.ACTION_SEND_MULTIPLE);<br> shareIntent.putParcelableArrayListExtra(Intent.EXTRA_STREAM, imageUris);<br> shareIntent.setType(&quot;image/<em>&quot;);<br> startActivity(Intent.createChooser(shareIntent, &quot;Share images to..&quot;));<br> }<br> /**
 </em> 设置需要分享的照片放入Uri类型的集合里<br> */<br> private ArrayList&lt;Uri&gt; getUriListForImages() {<br> ArrayList&lt;Uri&gt; myList = new ArrayList&lt;Uri&gt;();<br> String imageDirectoryPath = Environment.getExternalStorageDirectory().getAbsolutePath()+ &quot;/DCIM/Camera/&quot;;<br> File imageDirectory = new File(imageDirectoryPath);<br> String[] fileList = imageDirectory.list();<br> if(fileList.length != 0) {<br> for(int i=0; i&lt;5; i++){<br> try{<br> ContentValues values = new ContentValues(7);<br> values.put(MediaStore.Images.Media.TITLE, fileList[i]);<br> values.put(MediaStore.Images.Media.DISPLAY_NAME, fileList[i]);<br> values.put(MediaStore.Images.Media.DATE_TAKEN, new Date().getTime());<br> values.put(MediaStore.Images.Media.MIME_TYPE, &quot;image/jpeg&quot;);<br> values.put(MediaStore.Images.ImageColumns.BUCKET_ID, imageDirectoryPath.hashCode());<br> values.put(MediaStore.Images.ImageColumns.BUCKET_DISPLAY_NAME, fileList[i]);<br> values.put(&quot;_data&quot;, imageDirectoryPath + fileList[i]);<br> ContentResolver contentResolver = getApplicationContext().getContentResolver();<br> Uri uri = contentResolver.insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values);<br> myList.add(uri);<br> } catch (Exception e) {<br> e.printStackTrace();<br> }<br> }<br> }<br> return myList;<br> }<br> @Override<br> public boolean onCreateOptionsMenu(Menu menu) {<br> // Inflate the menu; this adds items to the action bar if it is present.<br> getMenuInflater().inflate(R.menu.menu_main_activity2, menu);<br> return true;<br> }<br><br>@Override<br> public boolean onOptionsItemSelected(MenuItem item) {<br> // Handle action bar item clicks here. The action bar will<br> // automatically handle clicks on the Home/Up button, so long<br> // as you specify a parent activity in AndroidManifest.xml.<br> int id = item.getItemId();<br><br>//noinspection SimplifiableIfStatement<br> if (id == R.id.action_settings) {<br> return true;<br> }<br><br>return super.onOptionsItemSelected(item);<br> }<br>}[/java]<br><br></div>  
	</div>
		<footer class="article-footer clearfix">


<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Training文档/">Training文档</a>
</div>



<div class="article-share" id="share">

  <div data-url="http://yoursite.com/2015/03/18/sending-simple-data-to-other-apps/" data-title="Sending Simple Data to Other Apps | louis.chen" data-tsina="null" class="share clearfix">
  </div>

</div>
</footer>   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2015/03/18/receiving-simple-data-from-other-apps/" title="Receiving Simple Data from Other Apps">
  <strong>PREVIOUS:</strong><br/>
  <span>
  Receiving Simple Data from Other Apps</span>
</a>
</div>


<div class="next">
<a href="/2015/03/17/allowing-other-apps-to-start-your-activity/"  title="Allowing Other Apps to Start Your Activity">
 <strong>NEXT:</strong><br/> 
 <span>Allowing Other Apps to Start Your Activity
</span>
</a>
</div>

</nav>

	
<section class="comment">
	<div class="ds-thread"></div>
</section>

</div>  
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">文章目录</strong>
  <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Send_Text_Content"><span class="toc-number">1.</span> <span class="toc-text">Send Text Content</span></a></li></ol>
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
			<li><a href="/categories/Android开发/" title="Android开发">Android开发<sup>21</sup></a></li>
		
			<li><a href="/categories/Android开源框架/" title="Android开源框架">Android开源框架<sup>4</sup></a></li>
		
			<li><a href="/categories/Android开发/Dandelion/" title="Dandelion">Dandelion<sup>1</sup></a></li>
		
			<li><a href="/categories/Java/" title="Java">Java<sup>1</sup></a></li>
		
			<li><a href="/categories/Android开发/Training文档/" title="Training文档">Training文档<sup>9</sup></a></li>
		
			<li><a href="/categories/Training文档/" title="Training文档">Training文档<sup>9</sup></a></li>
		
			<li><a href="/categories/blog/" title="blog">blog<sup>1</sup></a></li>
		
			<li><a href="/categories/未分类/" title="未分类">未分类<sup>0</sup></a></li>
		
			<li><a href="/categories/自定义控件/" title="自定义控件">自定义控件<sup>4</sup></a></li>
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			<li><a href="/tags/博客/" title="博客">博客<sup>1</sup></a></li>
		
			<li><a href="/tags/文章/" title="文章">文章<sup>1</sup></a></li>
		
		</ul>
</div>


  <div class="rsspart">
	<a href="null" target="_blank" title="rss">RSS 订阅</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> louis.chen,student of USTC,Focus on mobile develop. <br/>
			It is my amibition to develop beautiful app.</p>
	</section>
	 
	<div class="social-font clearfix">
		
		<a href="http://weibo.com/2338582935" target="_blank" title="weibo"></a>
		
		
		
		<a href="https://github.com/leerduo" target="_blank" title="github"></a>
		
		
		
	</div>
		<p class="copyright">Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/A-limon/pacman" target="_blank" title="Pacman">Pacman</a> © 2015 
		
		<a href="http://yoursite.com" target="_blank" title="louis.chen">louis.chen</a>
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.1.0.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else
    {
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      h  = $('article h2')
      ah = $('article h2'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  if(ah.length==0){
    t.css('display','none');
  }else{
    c.click(function(){
      ta.css('display', 'block').addClass('fadeIn');
    });
    o.click(function(){
      ta.css('display', 'none');
    });
    $(window).scroll(function(){
      ta.css("top",Math.max(140,320-$(this).scrollTop()));
    });
  };
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina');
  var html = [
  '<a href="#" class="overlay" id="qrcode"></a>',
  '<div class="qrcode clearfix"><span>扫描二维码分享到微信朋友圈</span><a class="qrclose" href="#share"></a><strong>Loading...Please wait</strong><img id="qrcode-pic" data-src="http://s.jiathis.com/qrcode.php?url=' + encodedUrl + '"/></div>',
  '<a href="#textlogo" class="article-back-to-top" title="Top"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="QRcode"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="Weibo"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);
  $('.article-share-qrcode').click(function(){
    var imgSrc = $('#qrcode-pic').attr('data-src');
    $('#qrcode-pic').attr('src', imgSrc);
    $('#qrcode-pic').load(function(){
        $('.qrcode strong').text(' ');
    });
  });
});     
</script>


<script type="text/javascript">
  var duoshuoQuery = {short_name:"null"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script> 





  </body>
</html>
